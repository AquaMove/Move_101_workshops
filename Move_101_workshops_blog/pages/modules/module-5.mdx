---
title: 'Module 5: Building Your Mini Demo Product with Smart Contracts'
description: Building Your Mini Demo Product with Smart Contracts'
---

# Module 5: Building Your Mini Demo Product with Smart Contracts

## Learning Objective

- Gi·ªõi thi·ªáu v·ªÅ **dapp-kit**
- Create a project/ explain the Project Structure

![](https://amethyst-fascinating-tortoise-826.mypinata.cloud/ipfs/bafybeiadagvbqnhi5zicygzvhtknlssqhb6kxij7i4pchst33uos5fyh6e)

## Gi·ªõi thi·ªáu v·ªÅ dApp kit 

dApp Kit l√† m·ªôt b·ªô React components, hooks, v√† utilities gi√∫p b·∫°n x√¢y d·ª±ng decentralized applications (dApps) tr√™n Sui blockchain nhanh ch√≥ng v√† d·ªÖ d√†ng h∆°n. N√≥ t·ªëi ∆∞u c√°c t√°c v·ª• th∆∞·ªùng g·∫∑p nh∆∞ k·∫øt n·ªëi v√≠ (wallets), k√Ω giao d·ªãch (sign transactions), v√† l·∫•y d·ªØ li·ªáu t·ª´ RPC nodes ‚Äî gi√∫p b·∫°n t·∫≠p trung ph√°t tri·ªÉn logic ·ª©ng d·ª•ng thay v√¨ x·ª≠ l√Ω boilerplate code.

### Key Features
- Query Hooks ‚Äì L·∫•y d·ªØ li·ªáu on-chain m√† dApp c·ªßa b·∫°n c·∫ßn m·ªôt c√°ch ti·ªán l·ª£i.
- Automatic Wallet State Management ‚Äì T·ª± ƒë·ªông qu·∫£n l√Ω tr·∫°ng th√°i k·∫øt n·ªëi v√≠, kh√¥ng c·∫ßn code th·ªß c√¥ng.
- Multi-Wallet Support ‚Äì H·ªó tr·ª£ h·∫ßu h·∫øt c√°c Sui wallets ph·ªï bi·∫øn.
- Pre-built React Components ‚Äì C√≥ s·∫µn c√°c UI components ƒë·ªÉ b·∫°n dev nhanh h∆°n.
- Customizable Hooks ‚Äì Linh ho·∫°t m·ªü r·ªông, t·∫°o ra components ri√™ng t·ª´ low-level hooks.


### How to install dApp kit

ƒê·ªÉ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng dApp Kit, b·∫°n c·∫ßn c√†i ƒë·∫∑t c√°c packages c·∫ßn thi·∫øt.

C√≥ 2 c√°ch ph·ªï bi·∫øn ƒë·ªÉ c√†i ƒë·∫∑t:

1. c√†i b·∫±ng npm 

```shell
npm i --save @mysten/dapp-kit @mysten/sui @tanstack/react-query
```

C√†i b·∫±ng yarn

```shell
yarn add @mysten/dapp-kit @mysten/sui @tanstack/react-query
```

Ngo√†i ra, dApp Kit c≈©ng h·ªó tr·ª£ c√†i ƒë·∫∑t b·∫±ng pnpm v√† bun. Tu·ª≥ v√†o workflow/project c·ªßa b·∫°n, h√£y ch·ªçn c√¥ng c·ª• package manager ph√π h·ª£p.



### How to initialize a front-end template

Khi kh·ªüi t·∫°o project, b·∫°n c√≥ th·ªÉ ch·ªçn gi·ªØa 2 template sau:

1. react-client-dapp: M·ªôt template React ƒë∆°n gi·∫£n, c√≥ s·∫µn v√≠ d·ª• hi·ªÉn th·ªã danh s√°ch assets trong wallet.
2. react-e2e-counter: M·ªôt template ph·ª©c t·∫°p h∆°n (end-to-end) k·∫øt h·ª£p Move code v·ªõi m·ªôt UI ƒë·∫øm ƒë∆°n gi·∫£n (counter UI).




###  Network Configuration v·ªõi @mysten/dapp-kit v√† @mysten/sui/client

ƒê·∫ßu ti√™n, c·∫ßn config network connection v√† Provider components trong file entry c·ªßa ·ª©ng d·ª•ng (v√≠ d·ª•: App.js ho·∫∑c App.tsx).

```tsx
import { createNetworkConfig, SuiClientProvider, WalletProvider } from '@mysten/dapp-kit';
import { getFullnodeUrl } from '@mysten/sui/client';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

const { networkConfig } = createNetworkConfig({
    localnet: { url: getFullnodeUrl('localnet') },
    mainnet: { url: getFullnodeUrl('mainnet') },
});

const queryClient = new QueryClient();

function App() {
    return (
        <QueryClientProvider client={queryClient}>
            <SuiClientProvider networks={networkConfig} defaultNetwork="localnet">
                <WalletProvider>
                    <YourApp />
                </WalletProvider>
            </SuiClientProvider>
        </QueryClientProvider>
    );
}

export default App;
```

ƒê·ªÉ config network connections trong app, b·∫°n s·∫Ω d√πng hai package ch√≠nh:
* `@mysten/sui/client` ‚Üí cung c·∫•p function `getFullnodeUrl`.
* `@mysten/dapp-kit` ‚Üí cung c·∫•p function `createNetworkConfig` v√† c√°c hooks h·ªó tr·ª£.


V·ªõi c·∫•u h√¨nh n√†y, app c·ªßa b·∫°n c√≥ th·ªÉ D·ªÖ d√†ng chuy·ªÉn ƒë·ªïi gi·ªØa nhi·ªÅu Sui networks (localnet, devnet, testnet, mainnet). 	K·∫øt h·ª£p c√πng Provider (SuiClientProvider) ƒë·ªÉ t·ª± ƒë·ªông k·∫øt n·ªëi ƒë√∫ng network khi dApp kh·ªüi ch·∫°y.

```tsx
import { getFullnodeUrl } from "@mysten/sui/client";
import { createNetworkConfig } from "@mysten/dapp-kit";

const { networkConfig, useNetworkVariable, useNetworkVariables } =
  createNetworkConfig({
    devnet: {
      url: getFullnodeUrl("devnet"),
    },
    testnet: {
      url: getFullnodeUrl("testnet"),
    },
    mainnet: {
      url: getFullnodeUrl("mainnet"),
    },
  });

export { useNetworkVariable, useNetworkVariables, networkConfig };
```

### Wallet Status Component

```tsx
import { useCurrentAccount } from "@mysten/dapp-kit";
import { Container, Flex, Heading, Text } from "@radix-ui/themes";
import { OwnedObjects } from "./OwnedObjects";

export function WalletStatus() {
  const account = useCurrentAccount();

  return (
    <Container my="2">
      <Heading mb="2">Wallet Status</Heading>

      {account ? (
        <Flex direction="column">
          <Text>Wallet connected</Text>
          <Text>Address: {account.address}</Text>
        </Flex>
      ) : (
        <Text>Wallet not connected</Text>
      )}
      <OwnedObjects />
    </Container>
  );
}

```



`WalletStatus` l√† m·ªôt React component hi·ªÉn th·ªã tr·∫°ng th√°i k·∫øt n·ªëi v√≠ v√† danh s√°ch objects thu·ªôc v√≠ ƒëang k·∫øt n·ªëi.

* `useCurrentAccount`: Import t·ª´ `@mysten/dapp-kit`. L√† hook d√πng ƒë·ªÉ l·∫•y th√¥ng tin wallet account hi·ªán t·∫°i ƒëang k·∫øt n·ªëi.

* Conditional rendering:
    * N·∫øu account t·ªìn t·∫°i ‚Üí hi·ªÉn th·ªã "Wallet connected" v√† ƒë·ªãa ch·ªâ v√≠.
    * N·∫øu account kh√¥ng t·ªìn t·∫°i ‚Üí hi·ªÉn th·ªã "Wallet not connected".




### Address query component

```tsx
import { useCurrentAccount, useSuiClientQuery } from "@mysten/dapp-kit";
import { Flex, Heading, Text } from "@radix-ui/themes";

export function OwnedObjects() {
  const account = useCurrentAccount();
  const { data, isPending, error } = useSuiClientQuery(
    "getOwnedObjects",
    {
      owner: account?.address as string,
    },
    {
      enabled: !!account,
    },
  );

  if (!account) {
    return;
  }

  if (error) {
    return <Flex>Error: {error.message}</Flex>;
  }

  if (isPending || !data) {
    return <Flex>Loading...</Flex>;
  }

  return (
    <Flex direction="column" my="2">
      {data.data.length === 0 ? (
        <Text>No objects owned by the connected wallet</Text>
      ) : (
        <Heading size="4">Objects owned by the connected wallet</Heading>
      )}
      {data.data.map((object) => (
        <Flex key={object.data?.objectId}>
          <Text>Object ID: {object.data?.objectId}</Text>
        </Flex>
      ))}
    </Flex>
  );
}
```

Component n√†y ph√π h·ª£p ƒë·ªÉ render danh s√°ch t√†i s·∫£n ho·∫∑c objects on-chain m√† v√≠ user s·ªü h·ªØu ngay sau khi k·∫øt n·ªëi.

`OwnedObjects` l√† m·ªôt React component d√πng ƒë·ªÉ hi·ªÉn th·ªã c√°c objects thu·ªôc v√≠ hi·ªán t·∫°i ƒëang k·∫øt n·ªëi.

* Conditional Rendering
    * N·∫øu ch∆∞a c√≥ account k·∫øt n·ªëi ‚Üí component return null.
    * N·∫øu query b·ªã l·ªói ‚Üí hi·ªÉn th·ªã error message.
    * N·∫øu query ƒëang loading ho·∫∑c ch∆∞a c√≥ d·ªØ li·ªáu ‚Üí hi·ªÉn th·ªã "Loading...".
    * N·∫øu query th√†nh c√¥ng ‚Üí hi·ªÉn th·ªã danh s√°ch objects.
    * N·∫øu kh√¥ng c√≥ objects ‚Üí hi·ªÉn th·ªã th√¥ng b√°o "No objects found".


### Split Coin t√°ch SUI t·ª´ gas/coin l·ªõn

Khi b·∫°n c·∫ßn t√°ch m·ªôt l∆∞·ª£ng SUI nh·ªè (v√≠ d·ª• ƒë·ªÉ thanh to√°n ph√≠ hay g·ª≠i tip), c√≥ th·ªÉ d√πng `tx.splitCoins` ƒë·ªÉ chia t·ª´ coin gas/coin l·ªõn h∆°n.

```ts
// S·ªë l∆∞·ª£ng c·∫ßn t√°ch theo ƒë∆°n v·ªã "m·ªôt SUI" * precision
// L∆∞u √Ω: (v√≠ d·ª•) n·∫øu Sui.decimal = 9 th√¨ 1 SUI = 10 ** 9
const suiAmount = 1 * 10 ** Sui.decimal;

// T√°ch t·ª´ gas ho·∫∑c t·ª´ coin ngu·ªìn
const [suiCoin] = tx.splitCoins(tx.gas, [suiAmount]);

// suiCoin l√∫c n√†y l√† m·ªôt coin object m·ªõi mang gi√° tr·ªã suiAmount
```

B·∫°n c√≥ th·ªÉ t√°ch nhi·ªÅu ‚Äúm·ªánh gi√°‚Äù c√πng l√∫c b·∫±ng c√°ch truy·ªÅn nhi·ªÅu ph·∫ßn t·ª≠ trong m·∫£ng.

* N·∫øu kh√¥ng mu·ªën d√πng tx.gas, c√≥ th·ªÉ truy·ªÅn coin object ngu·ªìn kh√°c: `tx.splitCoins(tx.object(sourceCoinId), [amount])`.
* B·∫°n c√≥ th·ªÉ t√°ch nhi·ªÅu ‚Äúm·ªánh gi√°‚Äù c√πng l√∫c b·∫±ng c√°ch truy·ªÅn nhi·ªÅu ph·∫ßn t·ª≠ trong m·∫£ng.


###  Merge Coin ‚Äì g·ªôp nhi·ªÅu coin l·∫ª

Trong Sui, ng∆∞·ªùi d√πng th∆∞·ªùng c√≥ nhi·ªÅu coin l·∫ª; mergeCoins gi√∫p g·ªôp l·∫°i th√†nh 1 coin ƒë·ªÉ d·ªÖ qu·∫£n l√Ω.

```ts
// G·ªôp coinObjectId_2, coinObjectId_3 v√†o coinObjectId (ƒë√≠ch)
tx.mergeCoins(
  tx.object(coinObjectId),
  [tx.object(coinObjectId_2), tx.object(coinObjectId_3)]
);
```

H√£y ch·ªçn m·ªôt ‚Äúcoin ƒë√≠ch‚Äù l√†m n∆°i merge; c√°c coin c√≤n l·∫°i s·∫Ω b·ªã ‚Äúƒë·ªï‚Äù v√†o coin n√†y. Merge tr∆∞·ªõc khi th·ª±c hi·ªán giao d·ªãch kh√°c c√≥ th·ªÉ gi√∫p gi·∫£m s·ªë object v√† ƒë∆°n gi·∫£n h√≥a logic.

### K√Ω & G·ª≠i Transaction qua wallet (plugin signature)

`@mysten/dapp-kit` cung c·∫•p hook `useSignAndExecuteTransaction` gi√∫p b·∫°n k√Ω v√† g·ª≠i transaction v·ªõi v√≠ ng∆∞·ªùi d√πng.

```ts
// Khai b√°o hook
const { mutate: signAndExecuteTransaction } = useSignAndExecuteTransaction();

// Th·ª±c thi transaction (ƒë√£ build s·∫µn "tx")
signAndExecuteTransaction(
  { transaction: tx },
  {
    onSuccess: (result) => {
      console.log(result.digest); // digest c·ªßa tx tr√™n chain
    },
    onError: (error) => {
      console.log(error);
    },
  }
);
```

Tr∆∞·ªõc khi mutate, h√£y build tx ƒë·∫ßy ƒë·ªß (split/merge/moveCall‚Ä¶).






## Advanced 
> How to build a SUI Move dApp based on zkLogin? üëÄ


